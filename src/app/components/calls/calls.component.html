<div class="calls">
  <!-- LEFT: roster + controls -->
  <aside class="left">
    <header class="left__header">
      <h3>People</h3>
      <input class="left__search" type="search" placeholder="Search usersâ€¦" />
    </header>

    <div class="left__list">
      <label class="user" *ngFor="let u of (users$ | async)" [class.self]="u.auth0UserId == (user$ | async)?.sub">
        <input type="checkbox" [(ngModel)]="selected[u.agoraUserId]"
          [disabled]="u.auth0UserId == (user$ | async)?.sub || (!canSelect(u.agoraUserId) && !selected[u.agoraUserId])" />
        <span class="user__avatar" aria-hidden="true">{{ u.username?.[0] || 'U' }}</span>
        <span class="user__name">{{ u.username }}</span>
        <span class="user__presence" [class.online]="online(u.agoraUserId)"></span>
      </label>
    </div>

    <footer class="left__footer">
      <mat-slide-toggle [(ngModel)]="isVideo">Video call?</mat-slide-toggle>
      <button mat-raised-button color="primary" (click)="callSelected()">Call</button>
    </footer>
  </aside>

  <!-- RIGHT: stage -->
  <section class="right">
    <div id="stage">
      <div id="remote-container" class="stage__grid">
        <!-- remote tiles rendered here by RtcService (#remote-<uid>) -->
      </div>

      <!-- Local preview: PIP overlay -->
      <div id="local-player" class="pip tile" title="You"></div>
    </div>

    <div class="controls">
      <button *ngIf="isConnected" mat-raised-button color="warn" (click)="hangup()">End</button>
    </div>
  </section>
</div>