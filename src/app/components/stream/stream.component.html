<video #video autoplay playsinline muted></video>
<!-- Setup overlay: visible until isReady === true -->
<div class="screen-overlay" *ngIf="!isReady" aria-live="polite" role="status">
  <div class="overlay-card">
    <mat-progress-spinner mode="indeterminate" diameter="48"></mat-progress-spinner>
    <h2>We’re setting up your stream…</h2>
    <p>This can take a few seconds.</p>
  </div>
</div>
<div class="controls-container">
  <div class="controls" *ngIf="isAuthenticated$ | async">
    <span class="live-indicator" [ngClass]="(isLive$ | async) ? 'live' : 'offline'" aria-live="polite">
      <i class="dot"></i>
      <span class="label">{{ (isLive$ | async) ? "LIVE" : "OFFLINE" }}</span>
    </span>
    <button class="play icon" (click)="resumeWebcam()" [disabled]="(isLive$ | async) || !isReady">
      <mat-icon class="transparent">play_arrow</mat-icon>
    </button>
    <button class="stop icon" (click)="stopWebcam()" [disabled]="!(isLive$ | async)">
      <mat-icon class="transparent">stop</mat-icon>
    </button>
  </div>
  <div *ngIf="!(isAuthenticated$ | async)" class="controls">
    <button mat-flat-button (click)="login()">Login to start streaming</button>
  </div>
</div>